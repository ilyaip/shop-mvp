# Настройка переменных окружения

## Обзор

Проект использует переменные окружения для конфигурации API и других настроек в зависимости от режима работы (development/production).

## Файлы окружения

### `.env.development` ✅ В репозитории
Настройки для режима разработки. Автоматически используется при запуске `npm run dev`.

```env
VITE_API_BASE_URL=http://localhost:8000
```

### `.env.production` ✅ В репозитории
Настройки для production сборки. Автоматически используется при запуске `npm run build`.

```env
VITE_API_BASE_URL=https://idigeneri.ru
```

### `.env.local` ⚠️ Не в репозитории
Локальные переопределения для вашей машины. Создайте этот файл, если нужно изменить настройки только для себя.

```env
# Пример: использование другого порта
VITE_API_BASE_URL=http://localhost:3000
```

### `.env` ⚠️ Не в репозитории
Базовый файл с настройками по умолчанию. Используется если не найдены специфичные файлы окружения.

### `.env.example` ✅ В репозитории
Шаблон с примерами всех доступных переменных. Используется для документации.

## Доступные переменные

### `VITE_API_BASE_URL`
**Обязательная**

URL бэкенда API для запросов данных.

- **Development**: `http://localhost:8000`
- **Production**: `https://idigeneri.ru`

## Использование

### Разработка

```bash
# Запуск dev сервера (использует .env.development)
npm run dev
```

### Локальные переопределения

Если вам нужно изменить настройки только для вашей машины (например, бэкенд на другом порту), создайте файл `.env.local`:

```bash
# .env.local
VITE_API_BASE_URL=http://localhost:3000
```

Этот файл имеет наивысший приоритет и переопределит настройки из `.env.development`.

### Production сборка

```bash
# Сборка для production (использует .env.production)
npm run build
```

### Локальное тестирование production сборки

```bash
# Сборка
npm run build

# Запуск локального сервера для preview
npm run preview
```

## Безопасность

✅ **Файлы в репозитории:**
- `.env.development` и `.env.production` включены в репозиторий
- Эти файлы содержат только публичные URL без секретов
- Все разработчики получат одинаковые настройки при клонировании

⚠️ **Локальные переопределения:**
- Файлы `.env`, `.env.local`, `.env.*.local` добавлены в `.gitignore`
- Используйте `.env.local` для локальных настроек (например, другой порт API)
- Никогда не коммитьте файлы с реальными API ключами или секретами

**Пример `.env.local` для локальных настроек:**
```env
# Переопределение для локальной разработки
VITE_API_BASE_URL=http://localhost:3000
```

## Добавление новых переменных

1. Добавьте переменную в `.env.example` с описанием
2. Добавьте в `.env.development` и `.env.production` с соответствующими значениями
3. Обновите эту документацию
4. Используйте в коде через `import.meta.env.VITE_YOUR_VAR`

**Примечание:** Все переменные для Vite должны начинаться с префикса `VITE_`

## Troubleshooting

### Переменные не применяются

1. Убедитесь, что переменная начинается с `VITE_`
2. Перезапустите dev сервер после изменения `.env` файлов
3. Проверьте, что файл `.env.development` или `.env.production` существует

### CORS ошибки

Если возникают CORS ошибки при подключении к API:

1. Проверьте, что `VITE_API_BASE_URL` указывает на правильный адрес
2. Убедитесь, что бэкенд настроен для приема запросов с вашего домена
3. См. `CORS_SETUP_GUIDE.md` для подробной настройки CORS
